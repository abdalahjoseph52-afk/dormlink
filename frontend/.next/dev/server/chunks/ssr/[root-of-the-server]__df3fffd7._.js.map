{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 34, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dormlink/frontend/context/AuthContext.js"],"sourcesContent":["'use client';\r\nimport { createContext, useContext, useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport api from '@/lib/api';\r\n\r\nconst AuthContext = createContext({});\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    const storedUser = localStorage.getItem('user');\r\n    const token = localStorage.getItem('token');\r\n    // eslint-disable-next-line react-hooks/set-state-in-effect\r\n    setUser(storedUser && token ? JSON.parse(storedUser) : null);\r\n    // eslint-disable-next-line react-hooks/set-state-in-effect\r\n    setLoading(false);\r\n  }, []);\r\n  const login = async (email, password) => {\r\n    const response = await api.post('/auth/login', { email, password });\r\n    const { token, user } = response.data;\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    setUser(user);\r\n    return user;\r\n  };\r\n\r\n  const register = async (data) => {\r\n    const response = await api.post('/auth/register', data);\r\n    const { token, user } = response.data;\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    setUser(user);\r\n    return user;\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    setUser(null);\r\n    router.push('/login');\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, login, register, logout, loading }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;AAHA;;;;;AAKA,MAAM,4BAAc,IAAA,yPAAa,EAAC,CAAC;AAE5B,SAAS,aAAa,EAAE,QAAQ,EAAE;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,oPAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,oPAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,kLAAS;IAExB,IAAA,qPAAS,EAAC;QACR,MAAM,aAAa,aAAa,OAAO,CAAC;QACxC,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,2DAA2D;QAC3D,QAAQ,cAAc,QAAQ,KAAK,KAAK,CAAC,cAAc;QACvD,2DAA2D;QAC3D,WAAW;IACb,GAAG,EAAE;IACL,MAAM,QAAQ,OAAO,OAAO;QAC1B,MAAM,WAAW,MAAM,wJAAG,CAAC,IAAI,CAAC,eAAe;YAAE;YAAO;QAAS;QACjE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,SAAS,IAAI;QACrC,aAAa,OAAO,CAAC,SAAS;QAC9B,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,QAAQ;QACR,OAAO;IACT;IAEA,MAAM,WAAW,OAAO;QACtB,MAAM,WAAW,MAAM,wJAAG,CAAC,IAAI,CAAC,kBAAkB;QAClD,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,SAAS,IAAI;QACrC,aAAa,OAAO,CAAC,SAAS;QAC9B,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,QAAQ;QACR,OAAO;IACT;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,iRAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAU;YAAQ;QAAQ;kBACnE;;;;;;AAGP;AAEO,MAAM,UAAU,IAAM,IAAA,sPAAU,EAAC"}}]
}