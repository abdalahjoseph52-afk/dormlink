{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dormlink/frontend/app/login/page.js"],"sourcesContent":["'use client';\r\nimport { useState } from 'react';\r\nimport Link from 'next/link';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useRouter } from 'next/navigation';\r\nimport toast from 'react-hot-toast';\r\n\r\nexport default function LoginPage() {\r\n  const { login } = useAuth();\r\n  const router = useRouter();\r\n  const [form, setForm] = useState({ email: '', password: '' });\r\n  const [loading, setLoading] = useState(false);\r\n  const [showPass, setShowPass] = useState(false);\r\n\r\n  // NO auto-redirect useEffect — user must intentionally log in\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!form.email || !form.password) { toast.error('Please fill in all fields'); return; }\r\n    setLoading(true);\r\n    try {\r\n      // Use AuthContext login() — this calls the API AND sets user state in context\r\n      const user = await login(form.email, form.password);\r\n      toast.success(`Welcome back, ${user.first_name}!`);\r\n      setTimeout(() => {\r\n        if (user.role === 'admin') router.push('/admin/dashboard');\r\n        else if (user.role === 'host') router.push('/host/dashboard');\r\n        else router.push('/student/dashboard');\r\n      }, 600);\r\n    } catch (e) {\r\n      toast.error(e.response?.data?.error || 'Invalid email or password');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <link href=\"https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap\" rel=\"stylesheet\"/>\r\n      <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons+Round\" rel=\"stylesheet\"/>\r\n      <style>{`\r\n        *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}\r\n        body{font-family:'Outfit',sans-serif;background:#f8fafc;min-height:100vh;}\r\n        .page{min-height:100vh;display:grid;grid-template-columns:1fr 1fr;}\r\n        @media(max-width:768px){.page{grid-template-columns:1fr;}.left{display:none!important;}}\r\n        .left{background:linear-gradient(155deg,#10367D 0%,#10367D 60%,#7A8FB5 100%);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:48px;position:relative;overflow:hidden;}\r\n        .left::before{content:'';position:absolute;inset:0;background:radial-gradient(circle at 30% 70%,rgba(255,255,255,0.08) 0%,transparent 60%);}\r\n        .orb{position:absolute;border-radius:50%;filter:blur(60px);opacity:0.15;}\r\n        .orb1{width:300px;height:300px;background:#7A8FB5;top:-80px;right:-80px;}\r\n        .orb2{width:200px;height:200px;background:#7A8FB5;bottom:40px;left:20px;}\r\n        .left-inner{position:relative;z-index:1;color:white;text-align:center;max-width:380px;}\r\n        .brand{font-size:28px;font-weight:800;letter-spacing:-0.5px;margin-bottom:48px;display:flex;align-items:center;gap:10px;justify-content:center;}\r\n        .brand-icon{width:40px;height:40px;background:rgba(255,255,255,0.2);border-radius:12px;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(10px);}\r\n        .left-title{font-size:32px;font-weight:700;line-height:1.2;margin-bottom:16px;}\r\n        .left-sub{font-size:15px;opacity:0.75;line-height:1.6;}\r\n        .feature-list{margin-top:40px;display:flex;flex-direction:column;gap:14px;text-align:left;}\r\n        .feature-item{display:flex;align-items:center;gap:12px;font-size:14px;opacity:0.9;}\r\n        .feature-dot{width:28px;height:28px;background:rgba(255,255,255,0.15);border-radius:8px;display:flex;align-items:center;justify-content:center;flex-shrink:0;}\r\n        .right{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:48px 32px;background:white;}\r\n        .form-box{width:100%;max-width:400px;}\r\n        .form-logo{display:none;font-size:22px;font-weight:800;color:#10367D;margin-bottom:32px;align-items:center;gap:8px;}\r\n        @media(max-width:768px){.form-logo{display:flex;}}\r\n        .form-title{font-size:26px;font-weight:700;color:#060E1C;margin-bottom:6px;}\r\n        .form-sub{font-size:14px;color:#64748b;margin-bottom:32px;}\r\n        .input-group{margin-bottom:18px;}\r\n        .input-label{display:block;font-size:13px;font-weight:600;color:#374151;margin-bottom:6px;}\r\n        .input-wrap{position:relative;}\r\n        .input-field{width:100%;padding:12px 16px;border:1.5px solid #e2e8f0;border-radius:10px;font-size:15px;font-family:inherit;color:#060E1C;background:#fafafa;outline:none;transition:border-color 0.2s,box-shadow 0.2s;}\r\n        .input-field:focus{border-color:#10367D;background:white;box-shadow:0 0 0 3px rgba(37,99,235,0.1);}\r\n        .input-field.has-icon{padding-right:44px;}\r\n        .input-icon-btn{position:absolute;right:12px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:#94a3b8;padding:4px;display:flex;align-items:center;}\r\n        .btn-submit{width:100%;padding:14px;background:#10367D;color:white;border:none;border-radius:10px;font-size:15px;font-weight:600;font-family:inherit;cursor:pointer;transition:background 0.2s,transform 0.1s;margin-top:8px;}\r\n        .btn-submit:hover:not(:disabled){background:#0B2960;}\r\n        .btn-submit:active:not(:disabled){transform:scale(0.99);}\r\n        .btn-submit:disabled{opacity:0.7;cursor:not-allowed;}\r\n        .divider{display:flex;align-items:center;gap:12px;margin:20px 0;color:#94a3b8;font-size:13px;}\r\n        .divider::before,.divider::after{content:'';flex:1;height:1px;background:#e2e8f0;}\r\n        .signup-link{text-align:center;font-size:14px;color:#64748b;}\r\n        .signup-link a{color:#10367D;font-weight:600;text-decoration:none;}\r\n        .signup-link a:hover{text-decoration:underline;}\r\n        .error-msg{background:#F4F7FC;border:1px solid #B8CAEB;color:#0B2960;padding:12px 14px;border-radius:8px;font-size:13px;margin-bottom:16px;display:flex;align-items:center;gap:8px;}\r\n      `}</style>\r\n\r\n      <div className=\"page\">\r\n        {/* Left panel */}\r\n        <div className=\"left\">\r\n          <div className=\"orb orb1\"/>\r\n          <div className=\"orb orb2\"/>\r\n          <div className=\"left-inner\">\r\n            <div className=\"brand\">\r\n              <svg width=\"40\" height=\"40\" viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"50\" cy=\"50\" r=\"46\" fill=\"#10367D\" stroke=\"white\" strokeWidth=\"7\"/><path d=\"M70 22 C70 44 55 50 50 50 C45 50 30 56 30 78\" stroke=\"white\" strokeWidth=\"6.5\" strokeLinecap=\"round\" fill=\"none\"/><rect x=\"23\" y=\"71\" width=\"14\" height=\"14\" rx=\"2.2\" fill=\"#B5CE00\"/><circle cx=\"70\" cy=\"22\" r=\"5.5\" fill=\"#B5CE00\"/><circle cx=\"73\" cy=\"68\" r=\"7.5\" stroke=\"white\" strokeWidth=\"4\" fill=\"none\"/><line x1=\"67.7\" y1=\"62.7\" x2=\"62.7\" y2=\"57.7\" stroke=\"white\" strokeWidth=\"4\" strokeLinecap=\"round\"/></svg>\r\n              <span><span style={{fontWeight:300,letterSpacing:'-0.02em'}}>Saka</span><span style={{fontWeight:700,letterSpacing:'-0.02em'}}>Boma</span></span>\r\n            </div>\r\n            <div className=\"left-title\">Find Your Perfect Student Home</div>\r\n            <div className=\"left-sub\">Trusted accommodation near every university in Tanzania.</div>\r\n            <div className=\"feature-list\">\r\n              {[\r\n                {icon:'verified', text:'Verified and inspected properties'},\r\n                {icon:'location_on', text:'Near your university campus'},\r\n                {icon:'payments', text:'Secure semester-based payments'},\r\n                {icon:'support_agent', text:'24/7 student support'},\r\n              ].map(f => (\r\n                <div key={f.icon} className=\"feature-item\">\r\n                  <div className=\"feature-dot\">\r\n                    <span className=\"material-icons-round\" style={{fontSize:'14px'}}>{f.icon}</span>\r\n                  </div>\r\n                  {f.text}\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Right form */}\r\n        <div className=\"right\">\r\n          <div className=\"form-box\">\r\n            <div className=\"form-logo\">\r\n              <svg width=\"28\" height=\"28\" viewBox=\"0 0 100 100\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"><circle cx=\"50\" cy=\"50\" r=\"46\" fill=\"white\" stroke=\"#10367D\" strokeWidth=\"7\"/><path d=\"M70 22 C70 44 55 50 50 50 C45 50 30 56 30 78\" stroke=\"#10367D\" strokeWidth=\"6.5\" strokeLinecap=\"round\" fill=\"none\"/><rect x=\"23\" y=\"71\" width=\"14\" height=\"14\" rx=\"2.2\" fill=\"#B5CE00\"/><circle cx=\"70\" cy=\"22\" r=\"5.5\" fill=\"#B5CE00\"/><circle cx=\"73\" cy=\"68\" r=\"7.5\" stroke=\"#10367D\" strokeWidth=\"4\" fill=\"none\"/><line x1=\"67.7\" y1=\"62.7\" x2=\"62.7\" y2=\"57.7\" stroke=\"#10367D\" strokeWidth=\"4\" strokeLinecap=\"round\"/></svg>\r\n              <span><span style={{fontWeight:300,letterSpacing:'-0.02em',color:'#10367D'}}>Saka</span><span style={{fontWeight:700,letterSpacing:'-0.02em',color:'#10367D'}}>Boma</span></span>\r\n            </div>\r\n            <div className=\"form-title\">Welcome back</div>\r\n            <div className=\"form-sub\">Sign in to your account to continue</div>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"input-group\">\r\n                <label className=\"input-label\">Email address</label>\r\n                <div className=\"input-wrap\">\r\n                  <input\r\n                    className=\"input-field\"\r\n                    type=\"email\"\r\n                    placeholder=\"you@example.com\"\r\n                    value={form.email}\r\n                    onChange={e => setForm({...form, email: e.target.value})}\r\n                    autoComplete=\"email\"\r\n                  />\r\n                </div>\r\n              </div>\r\n              <div className=\"input-group\">\r\n                <label className=\"input-label\">Password</label>\r\n                <div className=\"input-wrap\">\r\n                  <input\r\n                    className=\"input-field has-icon\"\r\n                    type={showPass ? 'text' : 'password'}\r\n                    placeholder=\"Enter your password\"\r\n                    value={form.password}\r\n                    onChange={e => setForm({...form, password: e.target.value})}\r\n                    autoComplete=\"current-password\"\r\n                  />\r\n                  <button type=\"button\" className=\"input-icon-btn\" onClick={() => setShowPass(!showPass)}>\r\n                    <span className=\"material-icons-round\" style={{fontSize:'18px'}}>{showPass ? 'visibility_off' : 'visibility'}</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <button type=\"submit\" className=\"btn-submit\" disabled={loading}>\r\n                {loading ? 'Signing in...' : 'Sign In'}\r\n              </button>\r\n            </form>\r\n\r\n            <div className=\"divider\">or</div>\r\n            <div className=\"signup-link\">\r\n              Don't have an account? <Link href=\"/register\">Create one free</Link>\r\n            </div>\r\n            <div style={{marginTop:'16px',textAlign:'center'}}>\r\n              <Link href=\"/\" style={{fontSize:'13px',color:'#64748b',textDecoration:'none',display:'inline-flex',alignItems:'center',gap:'4px'}}>\r\n                <span className=\"material-icons-round\" style={{fontSize:'14px'}}>arrow_back</span>\r\n                Back to homepage\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;AAOe,SAAS;IACtB,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,oKAAO;IACzB,MAAM,SAAS,IAAA,kLAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,oPAAQ,EAAC;QAAE,OAAO;QAAI,UAAU;IAAG;IAC3D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,oPAAQ,EAAC;IACvC,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,oPAAQ,EAAC;IAEzC,8DAA8D;IAE9D,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,IAAI,CAAC,KAAK,KAAK,IAAI,CAAC,KAAK,QAAQ,EAAE;YAAE,qMAAK,CAAC,KAAK,CAAC;YAA8B;QAAQ;QACvF,WAAW;QACX,IAAI;YACF,8EAA8E;YAC9E,MAAM,OAAO,MAAM,MAAM,KAAK,KAAK,EAAE,KAAK,QAAQ;YAClD,qMAAK,CAAC,OAAO,CAAC,CAAC,cAAc,EAAE,KAAK,UAAU,CAAC,CAAC,CAAC;YACjD,WAAW;gBACT,IAAI,KAAK,IAAI,KAAK,SAAS,OAAO,IAAI,CAAC;qBAClC,IAAI,KAAK,IAAI,KAAK,QAAQ,OAAO,IAAI,CAAC;qBACtC,OAAO,IAAI,CAAC;YACnB,GAAG;QACL,EAAE,OAAO,GAAG;YACV,qMAAK,CAAC,KAAK,CAAC,EAAE,QAAQ,EAAE,MAAM,SAAS;QACzC,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE;;0BACE,iRAAC;gBAAK,MAAK;gBAAwF,KAAI;;;;;;0BACvG,iRAAC;gBAAK,MAAK;gBAAgE,KAAI;;;;;;0BAC/E,iRAAC;0BAAO,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;MAyCT,CAAC;;;;;;0BAED,iRAAC;gBAAI,WAAU;;kCAEb,iRAAC;wBAAI,WAAU;;0CACb,iRAAC;gCAAI,WAAU;;;;;;0CACf,iRAAC;gCAAI,WAAU;;;;;;0CACf,iRAAC;gCAAI,WAAU;;kDACb,iRAAC;wCAAI,WAAU;;0DACb,iRAAC;gDAAI,OAAM;gDAAK,QAAO;gDAAK,SAAQ;gDAAc,MAAK;gDAAO,OAAM;;kEAA6B,iRAAC;wDAAO,IAAG;wDAAK,IAAG;wDAAK,GAAE;wDAAK,MAAK;wDAAU,QAAO;wDAAQ,aAAY;;;;;;kEAAK,iRAAC;wDAAK,GAAE;wDAA+C,QAAO;wDAAQ,aAAY;wDAAM,eAAc;wDAAQ,MAAK;;;;;;kEAAQ,iRAAC;wDAAK,GAAE;wDAAK,GAAE;wDAAK,OAAM;wDAAK,QAAO;wDAAK,IAAG;wDAAM,MAAK;;;;;;kEAAW,iRAAC;wDAAO,IAAG;wDAAK,IAAG;wDAAK,GAAE;wDAAM,MAAK;;;;;;kEAAW,iRAAC;wDAAO,IAAG;wDAAK,IAAG;wDAAK,GAAE;wDAAM,QAAO;wDAAQ,aAAY;wDAAI,MAAK;;;;;;kEAAQ,iRAAC;wDAAK,IAAG;wDAAO,IAAG;wDAAO,IAAG;wDAAO,IAAG;wDAAO,QAAO;wDAAQ,aAAY;wDAAI,eAAc;;;;;;;;;;;;0DACrkB,iRAAC;;kEAAK,iRAAC;wDAAK,OAAO;4DAAC,YAAW;4DAAI,eAAc;wDAAS;kEAAG;;;;;;kEAAW,iRAAC;wDAAK,OAAO;4DAAC,YAAW;4DAAI,eAAc;wDAAS;kEAAG;;;;;;;;;;;;;;;;;;kDAEjI,iRAAC;wCAAI,WAAU;kDAAa;;;;;;kDAC5B,iRAAC;wCAAI,WAAU;kDAAW;;;;;;kDAC1B,iRAAC;wCAAI,WAAU;kDACZ;4CACC;gDAAC,MAAK;gDAAY,MAAK;4CAAmC;4CAC1D;gDAAC,MAAK;gDAAe,MAAK;4CAA6B;4CACvD;gDAAC,MAAK;gDAAY,MAAK;4CAAgC;4CACvD;gDAAC,MAAK;gDAAiB,MAAK;4CAAsB;yCACnD,CAAC,GAAG,CAAC,CAAA,kBACJ,iRAAC;gDAAiB,WAAU;;kEAC1B,iRAAC;wDAAI,WAAU;kEACb,cAAA,iRAAC;4DAAK,WAAU;4DAAuB,OAAO;gEAAC,UAAS;4DAAM;sEAAI,EAAE,IAAI;;;;;;;;;;;oDAEzE,EAAE,IAAI;;+CAJC,EAAE,IAAI;;;;;;;;;;;;;;;;;;;;;;kCAYxB,iRAAC;wBAAI,WAAU;kCACb,cAAA,iRAAC;4BAAI,WAAU;;8CACb,iRAAC;oCAAI,WAAU;;sDACb,iRAAC;4CAAI,OAAM;4CAAK,QAAO;4CAAK,SAAQ;4CAAc,MAAK;4CAAO,OAAM;;8DAA6B,iRAAC;oDAAO,IAAG;oDAAK,IAAG;oDAAK,GAAE;oDAAK,MAAK;oDAAQ,QAAO;oDAAU,aAAY;;;;;;8DAAK,iRAAC;oDAAK,GAAE;oDAA+C,QAAO;oDAAU,aAAY;oDAAM,eAAc;oDAAQ,MAAK;;;;;;8DAAQ,iRAAC;oDAAK,GAAE;oDAAK,GAAE;oDAAK,OAAM;oDAAK,QAAO;oDAAK,IAAG;oDAAM,MAAK;;;;;;8DAAW,iRAAC;oDAAO,IAAG;oDAAK,IAAG;oDAAK,GAAE;oDAAM,MAAK;;;;;;8DAAW,iRAAC;oDAAO,IAAG;oDAAK,IAAG;oDAAK,GAAE;oDAAM,QAAO;oDAAU,aAAY;oDAAI,MAAK;;;;;;8DAAQ,iRAAC;oDAAK,IAAG;oDAAO,IAAG;oDAAO,IAAG;oDAAO,IAAG;oDAAO,QAAO;oDAAU,aAAY;oDAAI,eAAc;;;;;;;;;;;;sDAC3kB,iRAAC;;8DAAK,iRAAC;oDAAK,OAAO;wDAAC,YAAW;wDAAI,eAAc;wDAAU,OAAM;oDAAS;8DAAG;;;;;;8DAAW,iRAAC;oDAAK,OAAO;wDAAC,YAAW;wDAAI,eAAc;wDAAU,OAAM;oDAAS;8DAAG;;;;;;;;;;;;;;;;;;8CAEjK,iRAAC;oCAAI,WAAU;8CAAa;;;;;;8CAC5B,iRAAC;oCAAI,WAAU;8CAAW;;;;;;8CAE1B,iRAAC;oCAAK,UAAU;;sDACd,iRAAC;4CAAI,WAAU;;8DACb,iRAAC;oDAAM,WAAU;8DAAc;;;;;;8DAC/B,iRAAC;oDAAI,WAAU;8DACb,cAAA,iRAAC;wDACC,WAAU;wDACV,MAAK;wDACL,aAAY;wDACZ,OAAO,KAAK,KAAK;wDACjB,UAAU,CAAA,IAAK,QAAQ;gEAAC,GAAG,IAAI;gEAAE,OAAO,EAAE,MAAM,CAAC,KAAK;4DAAA;wDACtD,cAAa;;;;;;;;;;;;;;;;;sDAInB,iRAAC;4CAAI,WAAU;;8DACb,iRAAC;oDAAM,WAAU;8DAAc;;;;;;8DAC/B,iRAAC;oDAAI,WAAU;;sEACb,iRAAC;4DACC,WAAU;4DACV,MAAM,WAAW,SAAS;4DAC1B,aAAY;4DACZ,OAAO,KAAK,QAAQ;4DACpB,UAAU,CAAA,IAAK,QAAQ;oEAAC,GAAG,IAAI;oEAAE,UAAU,EAAE,MAAM,CAAC,KAAK;gEAAA;4DACzD,cAAa;;;;;;sEAEf,iRAAC;4DAAO,MAAK;4DAAS,WAAU;4DAAiB,SAAS,IAAM,YAAY,CAAC;sEAC3E,cAAA,iRAAC;gEAAK,WAAU;gEAAuB,OAAO;oEAAC,UAAS;gEAAM;0EAAI,WAAW,mBAAmB;;;;;;;;;;;;;;;;;;;;;;;sDAKtG,iRAAC;4CAAO,MAAK;4CAAS,WAAU;4CAAa,UAAU;sDACpD,UAAU,kBAAkB;;;;;;;;;;;;8CAIjC,iRAAC;oCAAI,WAAU;8CAAU;;;;;;8CACzB,iRAAC;oCAAI,WAAU;;wCAAc;sDACJ,iRAAC,0MAAI;4CAAC,MAAK;sDAAY;;;;;;;;;;;;8CAEhD,iRAAC;oCAAI,OAAO;wCAAC,WAAU;wCAAO,WAAU;oCAAQ;8CAC9C,cAAA,iRAAC,0MAAI;wCAAC,MAAK;wCAAI,OAAO;4CAAC,UAAS;4CAAO,OAAM;4CAAU,gBAAe;4CAAO,SAAQ;4CAAc,YAAW;4CAAS,KAAI;wCAAK;;0DAC9H,iRAAC;gDAAK,WAAU;gDAAuB,OAAO;oDAAC,UAAS;gDAAM;0DAAG;;;;;;4CAAiB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASlG"}}]
}