{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dormlink/frontend/app/login/page.js"],"sourcesContent":["'use client';\r\nimport { useState, useEffect } from 'react';\r\nimport Link from 'next/link';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useRouter } from 'next/navigation';\r\nimport toast from 'react-hot-toast';\r\nimport api from '@/lib/api';\r\n\r\nexport default function LoginPage() {\r\n  const { user, login } = useAuth();\r\n  const router = useRouter();\r\n  const [form, setForm] = useState({ email: '', password: '' });\r\n  const [loading, setLoading] = useState(false);\r\n  const [showPass, setShowPass] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      if (user.role === 'admin') window.location.href = '/admin/dashboard';\r\n      else if (user.role === 'host') window.location.href = '/host/dashboard';\r\n      else window.location.href = '/student/dashboard';\r\n    }\r\n  }, [user]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    if (!form.email || !form.password) { toast.error('Please fill in all fields'); return; }\r\n    setLoading(true);\r\n    try {\r\n      const res = await api.post('/auth/login', form);\r\n      const { token, user: userData } = res.data;\r\n      localStorage.setItem('token', token);\r\n      localStorage.setItem('user', JSON.stringify(userData));\r\n      toast.success(`Welcome back, ${userData.first_name}!`);\r\n      setTimeout(() => {\r\n        if (userData.role === 'admin') window.location.href = '/admin/dashboard';\r\n        else if (userData.role === 'host') window.location.href = '/host/dashboard';\r\n        else window.location.href = '/student/dashboard';\r\n      }, 800);\r\n    } catch (e) {\r\n      toast.error(e.response?.data?.error || 'Invalid email or password');\r\n    } finally { setLoading(false); }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <link href=\"https://fonts.googleapis.com/css2?family=Sora:wght@400;600;700;800&family=DM+Sans:wght@400;500;600&display=swap\" rel=\"stylesheet\"/>\r\n      <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons+Round\" rel=\"stylesheet\"/>\r\n      <style>{`\r\n        *,*::before,*::after{box-sizing:border-box;margin:0;padding:0;}\r\n        body{font-family:'DM Sans',sans-serif;background:#f8fafc;min-height:100vh;}\r\n        .page{min-height:100vh;display:grid;grid-template-columns:1fr 1fr;}\r\n        .left{background:linear-gradient(160deg,#1e3a8a 0%,#2563eb 50%,#3b82f6 100%);display:flex;flex-direction:column;justify-content:center;align-items:center;padding:48px;position:relative;overflow:hidden;}\r\n        .left::before{content:'';position:absolute;inset:0;background:url(\"data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.04'%3E%3Ccircle cx='40' cy='40' r='3'/%3E%3C/g%3E%3C/svg%3E\");}\r\n        .left-content{position:relative;text-align:center;color:white;max-width:400px;}\r\n        .left-logo{font-family:'Sora',sans-serif;font-size:32px;font-weight:800;color:white;display:flex;align-items:center;justify-content:center;gap:12px;margin-bottom:48px;}\r\n        .left-logo-icon{width:44px;height:44px;background:rgba(255,255,255,0.2);border-radius:14px;display:flex;align-items:center;justify-content:center;backdrop-filter:blur(8px);}\r\n        .left-title{font-family:'Sora',sans-serif;font-size:clamp(24px,3vw,36px);font-weight:800;line-height:1.2;margin-bottom:16px;}\r\n        .left-sub{font-size:16px;opacity:0.75;line-height:1.7;margin-bottom:40px;}\r\n        .left-stats{display:flex;gap:24px;justify-content:center;flex-wrap:wrap;}\r\n        .left-stat{background:rgba(255,255,255,0.1);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,0.15);border-radius:16px;padding:16px 20px;text-align:center;}\r\n        .left-stat-num{font-family:'Sora',sans-serif;font-size:24px;font-weight:800;}\r\n        .left-stat-label{font-size:12px;opacity:0.65;margin-top:2px;}\r\n        .right{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:48px 40px;background:white;}\r\n        .form-box{width:100%;max-width:420px;}\r\n        .form-title{font-family:'Sora',sans-serif;font-size:28px;font-weight:800;color:#0f172a;margin-bottom:6px;}\r\n        .form-sub{font-size:15px;color:#64748b;margin-bottom:32px;}\r\n        .form-group{margin-bottom:18px;}\r\n        .form-label{display:block;font-size:13px;font-weight:600;color:#374151;margin-bottom:6px;}\r\n        .input-wrap{position:relative;}\r\n        .input-icon{position:absolute;left:14px;top:50%;transform:translateY(-50%);color:#9ca3af;font-size:20px;}\r\n        .form-input{width:100%;border:1.5px solid #e5e7eb;border-radius:12px;padding:13px 14px 13px 44px;font-size:15px;font-family:'DM Sans',sans-serif;color:#0f172a;outline:none;transition:all 0.2s;background:#f9fafb;}\r\n        .form-input:focus{border-color:#2563eb;background:white;box-shadow:0 0 0 3px rgba(37,99,235,0.1);}\r\n        .pass-toggle{position:absolute;right:14px;top:50%;transform:translateY(-50%);background:none;border:none;cursor:pointer;color:#9ca3af;display:flex;}\r\n        .btn-submit{width:100%;background:linear-gradient(135deg,#2563eb,#1d4ed8);color:white;border:none;padding:14px;border-radius:12px;font-size:16px;font-weight:700;cursor:pointer;font-family:'DM Sans',sans-serif;transition:all 0.2s;margin-top:8px;display:flex;align-items:center;justify-content:center;gap:8px;}\r\n        .btn-submit:hover{transform:translateY(-1px);box-shadow:0 8px 24px rgba(37,99,235,0.3);}\r\n        .btn-submit:disabled{opacity:0.6;cursor:not-allowed;transform:none;}\r\n        .divider{display:flex;align-items:center;gap:12px;margin:20px 0;color:#9ca3af;font-size:13px;}\r\n        .divider::before,.divider::after{content:'';flex:1;height:1px;background:#e5e7eb;}\r\n        .form-footer{text-align:center;font-size:14px;color:#64748b;margin-top:20px;}\r\n        .form-footer a{color:#2563eb;font-weight:600;text-decoration:none;}\r\n        .form-footer a:hover{text-decoration:underline;}\r\n        .forgot{display:block;text-align:right;font-size:13px;color:#2563eb;font-weight:600;text-decoration:none;margin-top:6px;}\r\n        .forgot:hover{text-decoration:underline;}\r\n        .back-home{display:inline-flex;align-items:center;gap:6px;color:#64748b;font-size:13px;text-decoration:none;margin-bottom:32px;transition:color 0.2s;}\r\n        .back-home:hover{color:#2563eb;}\r\n        @media(max-width:768px){\r\n          .page{grid-template-columns:1fr;}\r\n          .left{display:none;}\r\n          .right{padding:32px 24px;min-height:100vh;}\r\n        }\r\n      `}</style>\r\n\r\n      <div className=\"page\">\r\n        <div className=\"left\">\r\n          <div className=\"left-content\">\r\n            <div className=\"left-logo\">\r\n              <div className=\"left-logo-icon\">\r\n                <svg width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\">\r\n                  <path d=\"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z\" stroke=\"white\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                  <path d=\"M9 22V12h6v10\" stroke=\"white\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\r\n                </svg>\r\n              </div>\r\n              DormLink\r\n            </div>\r\n            <div className=\"left-title\">Find your home away from home</div>\r\n            <div className=\"left-sub\">Join thousands of students who found safe, affordable accommodation near their university across Tanzania.</div>\r\n            <div className=\"left-stats\">\r\n              {[{num:'500+',label:'Hostels Listed'},{num:'44+',label:'Universities'},{num:'20+',label:'Cities'}].map((s,i)=>(\r\n                <div key={i} className=\"left-stat\">\r\n                  <div className=\"left-stat-num\">{s.num}</div>\r\n                  <div className=\"left-stat-label\">{s.label}</div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"right\">\r\n          <div className=\"form-box\">\r\n            <Link href=\"/\" className=\"back-home\">\r\n              <span className=\"material-icons-round\" style={{fontSize:'16px'}}>arrow_back</span>\r\n              Back to home\r\n            </Link>\r\n            <div className=\"form-title\">Welcome back üëã</div>\r\n            <div className=\"form-sub\">Sign in to your DormLink account</div>\r\n\r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">Email Address</label>\r\n                <div className=\"input-wrap\">\r\n                  <span className=\"material-icons-round input-icon\">mail</span>\r\n                  <input className=\"form-input\" type=\"email\" placeholder=\"you@example.com\"\r\n                    value={form.email} onChange={e => setForm({...form, email: e.target.value})} required/>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"form-group\">\r\n                <label className=\"form-label\">Password</label>\r\n                <div className=\"input-wrap\">\r\n                  <span className=\"material-icons-round input-icon\">lock</span>\r\n                  <input className=\"form-input\" type={showPass ? 'text' : 'password'} placeholder=\"Enter your password\"\r\n                    value={form.password} onChange={e => setForm({...form, password: e.target.value})} required/>\r\n                  <button type=\"button\" className=\"pass-toggle\" onClick={() => setShowPass(!showPass)}>\r\n                    <span className=\"material-icons-round\" style={{fontSize:'20px'}}>{showPass ? 'visibility_off' : 'visibility'}</span>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <button type=\"submit\" className=\"btn-submit\" disabled={loading}>\r\n                {loading ? <>\r\n                  <span style={{width:'18px',height:'18px',border:'2px solid rgba(255,255,255,0.3)',borderTop:'2px solid white',borderRadius:'50%',animation:'spin 0.8s linear infinite',display:'inline-block'}}/>\r\n                  Signing in...\r\n                </> : <>\r\n                  <span className=\"material-icons-round\" style={{fontSize:'18px'}}>login</span>\r\n                  Sign In\r\n                </>}\r\n              </button>\r\n            </form>\r\n\r\n            <div className=\"form-footer\">\r\n              Don't have an account?{' '}\r\n              <Link href=\"/register\">Sign up free</Link>\r\n            </div>\r\n\r\n            <div className=\"form-footer\" style={{marginTop:'8px'}}>\r\n              <Link href=\"/\" style={{color:'#94a3b8',fontSize:'13px'}}>‚Üê Browse hostels without signing in</Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <style>{`@keyframes spin{to{transform:rotate(360deg);}}`}</style>\r\n    </>\r\n  );\r\n}"],"names":[],"mappings":"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"}}]
}