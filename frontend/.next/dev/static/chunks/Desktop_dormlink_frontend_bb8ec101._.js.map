{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dormlink/frontend/lib/api.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = process.env.NEXT_PUBLIC_API_URL || 'http://localhost:5000/api';\r\n\r\nconsole.log('API URL:', API_URL);\r\n\r\nconst api = axios.create({\r\n  baseURL: API_URL,\r\n  headers: {\r\n    'Content-Type': 'application/json'\r\n  }\r\n});\r\n\r\napi.interceptors.request.use((config) => {\r\n  if (typeof window !== 'undefined') {\r\n    const token = localStorage.getItem('token');\r\n    if (token) {\r\n      config.headers.Authorization = `Bearer ${token}`;\r\n    }\r\n  }\r\n  return config;\r\n});\r\n\r\napi.interceptors.response.use(\r\n  (response) => response,\r\n  (error) => {\r\n    if (error.response?.status === 401) {\r\n      if (typeof window !== 'undefined') {\r\n        localStorage.removeItem('token');\r\n        localStorage.removeItem('user');\r\n        window.location.href = '/login';\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default api;\r\n"],"names":[],"mappings":";;;;AAEgB;AAFhB;;AAEA,MAAM,UAAU,8MAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;AAEnD,QAAQ,GAAG,CAAC,YAAY;AAExB,MAAM,MAAM,sLAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAEA,IAAI,YAAY,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;IAC5B,wCAAmC;QACjC,MAAM,QAAQ,aAAa,OAAO,CAAC;QACnC,IAAI,OAAO;YACT,OAAO,OAAO,CAAC,aAAa,GAAG,CAAC,OAAO,EAAE,OAAO;QAClD;IACF;IACA,OAAO;AACT;AAEA,IAAI,YAAY,CAAC,QAAQ,CAAC,GAAG,CAC3B,CAAC,WAAa,UACd,CAAC;IACC,IAAI,MAAM,QAAQ,EAAE,WAAW,KAAK;QAClC,wCAAmC;YACjC,aAAa,UAAU,CAAC;YACxB,aAAa,UAAU,CAAC;YACxB,OAAO,QAAQ,CAAC,IAAI,GAAG;QACzB;IACF;IACA,OAAO,QAAQ,MAAM,CAAC;AACxB;uCAGa"}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/HP/Desktop/dormlink/frontend/context/AuthContext.js"],"sourcesContent":["'use client';\r\nimport { createContext, useContext, useState, useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport api from '@/lib/api';\r\n\r\nconst AuthContext = createContext({});\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const router = useRouter();\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const storedUser = localStorage.getItem('user');\r\n      const token = localStorage.getItem('token');\r\n      if (storedUser && token) {\r\n        // eslint-disable-next-line react-hooks/set-state-in-effect\r\n        setUser(JSON.parse(storedUser));\r\n      }\r\n    } catch (e) {\r\n      localStorage.removeItem('user');\r\n      localStorage.removeItem('token');\r\n    } finally {\r\n      // eslint-disable-next-line react-hooks/set-state-in-effect\r\n      setLoading(false);\r\n    }\r\n  }, []);\r\n\r\n  const login = async (email, password) => {\r\n    const response = await api.post('/auth/login', { email, password });\r\n    const { token, user } = response.data;\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    setUser(user);\r\n    return user;\r\n  };\r\n\r\n  const register = async (data) => {\r\n    const response = await api.post('/auth/register', data);\r\n    const { token, user } = response.data;\r\n    localStorage.setItem('token', token);\r\n    localStorage.setItem('user', JSON.stringify(user));\r\n    setUser(user);\r\n    return user;\r\n  };\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    setUser(null);\r\n    router.push('/');\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, login, register, logout, loading }}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport const useAuth = () => useContext(AuthContext);"],"names":[],"mappings":";;;;;;;AACA;AACA;AACA;;;AAHA;;;;AAKA,MAAM,4BAAc,IAAA,iNAAa,EAAC,CAAC;AAE5B,SAAS,aAAa,EAAE,QAAQ,EAAE;;IACvC,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,4MAAQ,EAAC;IACjC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,4MAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,qLAAS;IAExB,IAAA,6MAAS;kCAAC;YACR,IAAI;gBACF,MAAM,aAAa,aAAa,OAAO,CAAC;gBACxC,MAAM,QAAQ,aAAa,OAAO,CAAC;gBACnC,IAAI,cAAc,OAAO;oBACvB,2DAA2D;oBAC3D,QAAQ,KAAK,KAAK,CAAC;gBACrB;YACF,EAAE,OAAO,GAAG;gBACV,aAAa,UAAU,CAAC;gBACxB,aAAa,UAAU,CAAC;YAC1B,SAAU;gBACR,2DAA2D;gBAC3D,WAAW;YACb;QACF;iCAAG,EAAE;IAEL,MAAM,QAAQ,OAAO,OAAO;QAC1B,MAAM,WAAW,MAAM,2JAAG,CAAC,IAAI,CAAC,eAAe;YAAE;YAAO;QAAS;QACjE,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,SAAS,IAAI;QACrC,aAAa,OAAO,CAAC,SAAS;QAC9B,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,QAAQ;QACR,OAAO;IACT;IAEA,MAAM,WAAW,OAAO;QACtB,MAAM,WAAW,MAAM,2JAAG,CAAC,IAAI,CAAC,kBAAkB;QAClD,MAAM,EAAE,KAAK,EAAE,IAAI,EAAE,GAAG,SAAS,IAAI;QACrC,aAAa,OAAO,CAAC,SAAS;QAC9B,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;QAC5C,QAAQ;QACR,OAAO;IACT;IAEA,MAAM,SAAS;QACb,aAAa,UAAU,CAAC;QACxB,aAAa,UAAU,CAAC;QACxB,QAAQ;QACR,OAAO,IAAI,CAAC;IACd;IAEA,qBACE,gOAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAM;YAAO;YAAU;YAAQ;QAAQ;kBACnE,CAAC,WAAW;;;;;;AAGnB;GApDgB;;QAGC,qLAAS;;;KAHV;AAsDT,MAAM,UAAU;;IAAM,OAAA,IAAA,8MAAU,EAAC;AAAW;IAAtC"}}]
}